<div id="giscus-container"></div>

<script
    src="https://giscus.app/client.js"
    data-repo="mrodriguezdev/mrodriguez.tech"
    data-repo-id="R_kgDOMA6e3Q"
    data-category="Announcements"
    data-category-id="DIC_kwDOMA6e3c4CfpjY"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="es"
    data-loading="lazy"
    crossorigin="anonymous"
    async></script>

<script>
    // @ts-nocheck
    const updateGiscusTheme = (theme) => {
        const giscusContainer = document.getElementById("giscus-container");
        if (!giscusContainer) {
            console.error("Error: Giscus container no existe");
            return;
        }

        while (giscusContainer.firstChild) {
            giscusContainer.removeChild(giscusContainer.firstChild);
        }

        const script = document.createElement("script");
        script.src = "https://giscus.app/client.js";
        script.setAttribute("data-repo", "mrodriguezdev/mrodriguez.tech");
        script.setAttribute("data-repo-id", "R_kgDOMA6e3Q");
        script.setAttribute("data-category", "Announcements");
        script.setAttribute("data-category-id", "DIC_kwDOMA6e3c4CfpjY");
        script.setAttribute("data-mapping", "pathname");
        script.setAttribute("data-strict", "0");
        script.setAttribute("data-reactions-enabled", "1");
        script.setAttribute("data-emit-metadata", "0");
        script.setAttribute("data-input-position", "top");
        script.setAttribute("data-theme", theme);
        script.setAttribute("data-lang", "es");
        script.setAttribute("data-loading", "lazy");
        script.crossOrigin = "anonymous";
        script.async = true;

        giscusContainer.appendChild(script);
    };

    const initialTheme = localStorage.getItem("theme");
    updateGiscusTheme(initialTheme);
</script>
